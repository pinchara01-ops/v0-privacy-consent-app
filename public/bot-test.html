<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Detection "Lab Environment" Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #DAE0E6;
            /* Reddit gray */
            margin: 0;
            padding: 40px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
        }

        /* Mimic Reddit Post Styles */
        .reddit-post {
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
            padding: 20px;
        }

        .post-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .post-content {
            font-size: 14px;
            line-height: 1.5;
        }

        .meta {
            color: #787C7E;
            font-size: 12px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <h1>üß™ Safe Experiment Lab</h1>
            <p>This page mimics Reddit's structure to test your Bot Defense extension safely.</p>
            <p><strong>Status:</strong> <span id="status">Waiting for Extension...</span></p>
            <button onclick="triggerArtificialBotSignal()" style="padding:10px; cursor:pointer;">‚ö†Ô∏è Simulate Bot
                Detection Signal</button>
        </div>

        <!-- Targeted Element 1: shreddit-post -->
        <shreddit-post id="t3_simulated_post_1" class="reddit-post">
            <div class="meta">Posted by u/SafeTester ‚Ä¢ 2 hours ago</div>
            <div class="post-title">Test Post #1: This should get BLURRED</div>
            <div class="post-content">
                If usage of bot tools is detected, this content should become unreadable.
                The extension looks for 'shreddit-post' tags or specific IDs.
            </div>
        </shreddit-post>

        <!-- Targeted Element 2: data-testid="post-container" -->
        <div data-testid="post-container" class="reddit-post" id="t3_simulated_post_2">
            <div class="meta">Posted by u/LabRat ‚Ä¢ 5 hours ago</div>
            <div class="post-title">Test Post #2: Another target</div>
            <div class="post-content">
                This container uses the 'data-testid="post-container"' attribute which is common in React apps like
                Reddit.
                It is a primary target for the firewall.
            </div>
        </div>

        <!-- Targeted Element 3: standard div with t3_ id -->
        <div id="t3_simulated_post_3" class="reddit-post">
            <div class="meta">Posted by u/Honeypot ‚Ä¢ Just now</div>
            <div class="post-title">Test Post #3: ID-based targeting</div>
            <div class="post-content">
                This div uses the 't3_' prefix in its ID, which is the Reddit Thing ID format for posts.
            </div>
        </div>

        <div id="honeypot-trap" style="opacity: 0.01; height: 1px; width: 1px; overflow: hidden;">
            <!-- Bot trap element -->
        </div>

    </div>

    <script>
        // Helper to manually trigger the event if you don't want to run a full bot script
        function triggerArtificialBotSignal() {
            console.log("Simulating Bot Signal...");
            window.dispatchEvent(new CustomEvent('privacy-bot-detected', {
                detail: { kind: 'Simulation' }
            }));
        }

        // Check if extension is loaded
        setInterval(() => {
            const badge = document.getElementById('p-badge');
            const status = document.getElementById('status');
            if (badge) {
                status.innerHTML = "‚úÖ Extension Active & Injected";
                status.style.color = "green";
            }
        }, 1000);
    </script>

</body>

</html>